color = pal2(myWashIRS$AdjInc),
group = "Sites",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("Factor", "Sites"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45))
MMM
pal  <- colorNumeric(palette = "RdYlBu", domain =c(0:45))
pal2 <- colorNumeric(palette = "RdYlBu", domain =c(0:100), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.75,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent change: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "Factor") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" Address = ", myWashIRS$Address,
"<br/>",
"ID = ", myWashIRS$PlaceName),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "Sites",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("Factor", "Sites"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45))
MMM
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomcenter",
pal=pal,
values = c(0:45))
MMM
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomright",
pal=pal,
values = c(0:45))
MMM
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomright",
pal=pal2,
values = c(0:100))
MMM
pal  <- colorNumeric(palette = "RdYlBu", domain =c(0:45))
pal2 <- colorNumeric(palette = "RdYlBu", domain =c(0:200), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.75,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent change: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "Factor") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" Address = ", myWashIRS$Address,
"<br/>",
"ID = ", myWashIRS$PlaceName),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "Sites",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("Factor", "Sites"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomright",
pal=pal2,
values = c(0:200))
MMM
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.75,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent change: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "Factor") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "Sites",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("Factor", "Sites"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomright",
pal=pal2,
values = c(0:200))
MMM
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.75,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "Factor") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "Sites",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("Factor", "Sites"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Percent case change (1 day)",
position = "bottomright",
pal=pal2,
values = c(0:200))
MMM
pal  <- colorNumeric(palette = "RdYlBu", domain =c(0:45))
pal2 <- colorNumeric(palette = "RdYlBu", domain =c(0:140), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.75,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "Factor") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "Sites",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("Factor", "Sites"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))
MMM
Percent_uninsured_from_census<- read.csv(file = "Percent_uninsured_from_census.csv", na.strings = c("", "NA"))
head(Percent_uninsured_from_census)
Percent_uninsured <- Percent_uninsured_from_census %>%
filter(state=="53")
Percent_uninsured
View(Z)
mydf2<- sp::merge(Washington, Percent_uninsured , by="GEOID", all=T)
class(Washington$GEO_ID)
Washington$GEO_ID
Percent_uninsured
Percent_uninsured$GEOID_ID <- paste("0500000US",Percent_uninsured$GEOID)
Percent_uninsured
Percent_uninsured$GEOID_ID <- paste("0500000US",Percent_uninsured$GEOID, sep = "")
Percent_uninsured
Percent_uninsured$GEOID_ID <- paste("0500000US",Percent_uninsured$GEOID, sep = "")
mydf2<- sp::merge(Washington, Percent_uninsured , by="GEOID_ID", all=T)
Percent_uninsured
Washington
head(Washington$GEO_ID)
Percent_uninsured
class(Percent_uninsured)
class(Percent_uninsured$GEOID_ID)
mydf<- sp::merge(Washington, Percent_uninsured , by="GEOID_ID", all=T)
head(Washington$GEO_ID)
head(Percent_uninsured$GEOID_ID)
mydf2 <- merge(Washington, Percent_uninsured , by="GEOID_ID", all=T)
class(Washington$GEO_ID)
class(Percent_uninsured$GEOID_ID)
mydf2 <- merge(Washington, Percent_uninsured , by.x ="GEOID_ID", by.y="GEOID_ID",  all=T)
mydf2 <- merge(Washington, Percent_uninsured , by.x ="GEOID_ID", by.y="GEOID_ID")
mydf2 <- merge(x = Washington, y = Percent_uninsured , by ="GEOID_ID",  all=T)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.75,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "IRS tax data by zip",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("County HPV vaccination", "IRS tax data by zip"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))
MMM
saveWidget(MMM, file = "Outputs/Prototype Washington map v0.1.html")
saveWidget(MMM, file = "Output/Prototype Washington map v0.1.html")
saveWidget(MMM, file = "/Users/andywilson1/Documents/GitHub/Olivia-DIA/Output/Prototype Washington map v0.1.html")
head(ZipCodes)
head(WashIRS)
Percent_uninsured
?gsub
Percent_uninsured$NAME2 <- gsub(" County, WA", Percent_uninsured$NAME, "")
Percent_uninsured$NAME2 <- gsub(Percent_uninsured$NAME," County, WA" , "")
Percent_uninsured$NAME2 <- gsub(" County, WA" , "", Percent_uninsured$NAME)
Percent_uninsured
Percent_uninsured$NAME <- gsub(" County, WA" , "", Percent_uninsured$NAME)
mydf2 <- sp::merge(Washington, Percent_uninsured , by ="NAME",  all=T)
summary(mydf2$PCTUI_PT)
summary(as.numeric(mydf2$PCTUI_PT))
mydf2$PCTUI_PT
summary(as.numeric(as.factor(mydf2$PCTUI_PT)))
Percent_uninsured <- Percent_uninsured_from_census %>%
filter(state=="53") %>%
convert(num(PCTUI_PT))
Percent_uninsured$PCTUI_PTnum <- as.numeric(as.character(Percent_uninsured$PCTUI_PT))
Percent_uninsured
summary(Percent_uninsured)
mydf2 <- sp::merge(Washington, Percent_uninsured , by ="NAME",  all=T)
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:15), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.65,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination") %>%
addPolygons(data = mydf2, weight=1, fillOpacity = 0.65,
color = pal3(Percent_uninsured$PCTUI_PTnum),
label = mydf2$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf2$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination2") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "IRS tax data by zip",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("County HPV vaccination", "IRS tax data by zip", "County HPV vaccination2"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))
MMM
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:15), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.45,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination") %>%
addPolygons(data = mydf2, weight=1, fillOpacity = 0.45,
color = pal3(Percent_uninsured$PCTUI_PTnum),
label = mydf2$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf2$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination2") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "IRS tax data by zip",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("County HPV vaccination", "IRS tax data by zip", "County HPV vaccination2"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))%>%
addLegend(title = "Avg annual income",
position = "topleft",
pal=pal2,
values = c(0:15))
MMM
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:10), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.45,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination") %>%
addPolygons(data = mydf2, weight=1, fillOpacity = 0.45,
color = pal3(Percent_uninsured$PCTUI_PTnum),
label = mydf2$NAME,
popup = paste0("Percent Uninsured: ",
Percent_uninsured$PCTUI_PTnum, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination2") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "IRS tax data by zip",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("County HPV vaccination", "IRS tax data by zip", "County HPV vaccination2"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))%>%
addLegend(title = "Percent uninsured",
position = "topleft",
pal=pal2,
values = c(0:10))
MMM
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:50), reverse = TRUE)
Percent_uninsured$PCTUI_PTnum
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:15) )#, reverse = TRUE)
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:15) )#, reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.45,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination") %>%
addPolygons(data = mydf2, weight=1, fillOpacity = 0.45,
color = pal3(Percent_uninsured$PCTUI_PTnum),
label = mydf2$NAME,
popup = paste0("Percent Uninsured: ",
Percent_uninsured$PCTUI_PTnum, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County Uninsured") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "IRS tax data by zip",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("County HPV vaccination", "IRS tax data by zip", "County Uninsured"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))%>%
addLegend(title = "Percent uninsured",
position = "topleft",
pal=pal2,
values = c(0:15))
MMM
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))%>%
addLegend(title = "Percent uninsured",
position = "topleft",
pal=pal3,
values = c(0:15))
MMM
pal3 <- colorNumeric(palette = "RdYlBu", domain =c(0:15), reverse = TRUE)
MM <- m %>% addPolygons(data = mydf, weight=1, fillOpacity = 0.45,
color = pal(mydf$All),
label = mydf$NAME,
popup = paste0("Percent HPV vaccine UtD: ",
mydf$All, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County HPV vaccination") %>%
addPolygons(data = mydf2, weight=1, fillOpacity = 0.45,
color = pal3(Percent_uninsured$PCTUI_PTnum),
label = mydf2$NAME,
popup = paste0("Percent Uninsured: ",
Percent_uninsured$PCTUI_PTnum, "%"),
labelOptions = labelOptions(textOnly = FALSE),
group = "County Uninsured") %>%
addCircleMarkers(lng = myWashIRS$longitude,
lat = myWashIRS$latitude,
label = myWashIRS$PlaceName,
popup = paste("<b>", myWashIRS$PlaceName,"</b>",
"<br/>",
" AVG ADJUSTED GROSS INCOME (IN THOUSANDS OF DOLLARS)     = $", round(myWashIRS$AdjInc,2),
"<br/>",
"zip = ", myWashIRS$zip),
radius = myWashIRS$AdjInc,
stroke = FALSE, fillOpacity = 0.5,
color = pal2(myWashIRS$AdjInc),
group = "IRS tax data by zip",
clusterOptions = markerClusterOptions())%>%
addLayersControl(overlayGroups = c("County HPV vaccination", "IRS tax data by zip", "County Uninsured"))
MMM <- MM %>% addResetMapButton() %>%
addLegend(title = "Vaccination rates",
position = "bottomleft",
pal=pal,
values = c(0:45)) %>%
addLegend(title = "Avg annual income",
position = "bottomright",
pal=pal2,
values = c(0:150))%>%
addLegend(title = "Percent uninsured",
position = "topleft",
pal=pal3,
values = c(0:15))
MMM
saveWidget(MMM, file = "/Users/andywilson1/Documents/GitHub/Olivia-DIA/Output/Prototype Washington map v0.1.html")
